import { useBillTableRow } from '@/lib/hooks/useBillTableRow';
import { sendBillToEmail } from '@/lib/services/MailService';
import { BillTableRow } from '@/models/bill';
import { Box, Button } from '@mui/material';
import React, { useRef } from 'react';

function email() {
  const ref = useRef<HTMLDivElement>(null);
  // const bill: BillTableRow = {
  //   paid_time: new Date('2023-12-01T06:37:57.543Z'),
  //   created_at: new Date('2023-12-01T06:37:57.543Z'),
  //   total_price: 0,
  //   id: 'mn52HuUp4fw3u7mQp4QS',
  //   bookingItem: {
  //     occasion: 'Sinh nhật',
  //     size: 'NHỎ',
  //     note: '',
  //     images: [
  //       'bookingImages/mn52HuUp4fw3u7mQp4QS_0',
  //       'bookingImages/mn52HuUp4fw3u7mQp4QS_1',
  //       'bookingImages/mn52HuUp4fw3u7mQp4QS_2',
  //       'bookingImages/mn52HuUp4fw3u7mQp4QS_3',
  //     ],
  //     cake_base_id: '2',
  //     message: {
  //       color: '#F43545',
  //       content: 'dui',
  //     },
  //     id: 'UmiJ5XWO3XIz2EKOtITb',
  //     cakeBase: {
  //       id: '2',
  //       name: 'Cốt bánh chocolate',
  //       description: 'Cốt bánh chocolate thường đậm đà và có màu nâu sôcôla.',
  //       image: 'cakeBases/2.jpg',
  //     },
  //   },
  //   updated_at: new Date('2023-12-01T06:37:57.543Z'),
  //   delivery_id: 'V05cdsl4XOAwpzfa51kd',
  //   branch: {
  //     id: '1',
  //     created_at: new Date('2023-10-16T13:10:30.135Z'),
  //     group_id: 'vn01AtyWFcteKd4OJsCa',
  //     province_id: '4NLfSB5IRPv6JihoPVty',
  //     active: true,
  //     name: 'H&H Hà Nội',
  //     manager_id: 'Hhs5gXkm5jTPf44itD0y',
  //     updated_at: new Date('2023-10-16T13:10:42.863Z'),
  //     address: 'Số nhà 42, ngõ 17, đường Trần Duy Hưng, quận Cầu Giấy, Hà Nội.',
  //   },
  //   total_discount: 0,
  //   customer_id: '1LAnHa9LFNJ0EFExZR6q',
  //   branch_id: '1',
  //   booking_item_id: 'UmiJ5XWO3XIz2EKOtITb',
  //   payment_method_id: 'cash',
  //   note: '',
  //   sale_price: 0,
  //   sale_id: '',
  //   state: 'paid',
  //   final_price: 100000,
  //   paymentMethod: {
  //     id: 'cash',
  //     name: 'Tiền mặt',
  //     code: 'cash',
  //     active: true,
  //     image: 'paymentMethods/cash.jpg',
  //   },
  //   customer: {
  //     avatar: '',
  //     tel: '0343214971',
  //     mail: 'phantruonghuy0701@gmail.com',
  //     birth: new Date('1990-01-31T17:00:00.000Z'),
  //     group_id: 'default',
  //     type: 'google',
  //     uid: '3Kelzi2xkwRiknCpMHQCeQTZmFg2',
  //     active: true,
  //     name: 'Trường Huy Phan',
  //     created_at: new Date('2023-09-27T12:51:26.400Z'),
  //     updated_at: new Date('2023-09-27T12:51:26.400Z'),
  //     id: '1LAnHa9LFNJ0EFExZR6q',
  //   },
  //   deliveryTableRow: {
  //     created_at: new Date('2023-12-01T06:37:56.662Z'),
  //     end_at: new Date('2023-12-01T06:37:56.662Z'),
  //     name: 'Phan Trường Huy',
  //     updated_at: new Date('2023-12-01T06:37:56.662Z'),
  //     shipper_id: '',
  //     mail: 'phantruonghuy0701@gmail.com',
  //     start_at: new Date('2023-12-01T06:37:56.662Z'),
  //     tel: '0343214971',
  //     ship_date: new Date('2023-12-01T06:37:47.132Z'),
  //     state: 'delivered',
  //     id: 'V05cdsl4XOAwpzfa51kd',
  //     cancel_note: '',
  //     delivery_note: '',
  //     ship_time: 'Buổi sáng (07:30 - 11:30)',
  //     address: '195 Tân Lập, Đông Hoà, Thủ Đức, Bình Dương 700000, Việt Nam',
  //     image: '',
  //   },
  //   billItems: [],
  // };

  const bill: BillTableRow = {
    state: 'paid',
    created_at: new Date('2023-11-30T21:26:42.039Z'),
    total_discount: 0,
    booking_item_id: '',
    final_price: 1099990,
    branch_id: '1',
    total_price: 1100000,
    sale_id: 'ItjrSHJ3Y2ghRS7xKWbU',
    customer_id: '1LAnHa9LFNJ0EFExZR6q',
    delivery_id: 'as3EkfdTqQylOv7VQtTh',
    payment_method_id: 'vnpay',
    sale_price: 10,
    paid_time: new Date('2023-11-30T21:46:52.385Z'),
    note: '',
    updated_at: new Date('2023-11-30T21:46:52.165Z'),
    id: 'nUjbIFt19T0ODZdk6f3g',
    paymentMethod: {
      id: 'vnpay',
      code: 'vn',
      active: true,
      image: 'paymentMethods/vnpay.jpg',
      name: 'VNPay',
    },
    customer: {
      group_id: 'default',
      name: 'Trường Huy Phan',
      created_at: new Date('2023-09-27T12:51:26.400Z'),
      mail: 'phantruonghuy0701@gmail.com',
      type: 'google',
      birth: new Date('1990-01-31T17:00:00.000Z'),
      tel: '0343214971',
      updated_at: new Date('2023-09-27T12:51:26.400Z'),
      active: true,
      avatar: '',
      uid: '3Kelzi2xkwRiknCpMHQCeQTZmFg2',
      id: '1LAnHa9LFNJ0EFExZR6q',
    },
    sale: {
      end_at: new Date('2023-12-08T17:00:00.310Z'),
      description: 'Sa le 3',
      limit: 10,
      updated_at: new Date('2023-10-12T08:51:58.531Z'),
      name: 'Sale 3',
      code: 's3',
      percent: 0.3,
      created_at: new Date('2023-10-12T08:51:34.365Z'),
      active: true,
      start_at: new Date('2023-10-03T17:00:00.116Z'),
      image: '',
      id: 'ItjrSHJ3Y2ghRS7xKWbU',
    },
    deliveryTableRow: {
      ship_date: new Date('2023-12-01T21:21:57.000Z'),
      image: '',
      delivery_note: '',
      cancel_note: '',
      state: 'issued',
      end_at: new Date('2023-11-30T21:26:41.699Z'),
      updated_at: new Date('2023-11-30T21:26:41.699Z'),
      address: '195 Tân Lập, Đông Hoà, Thủ Đức, Bình Dương 700000, Việt Nam',
      created_at: new Date('2023-11-30T21:26:41.699Z'),
      shipper_id: '',
      start_at: new Date('2023-11-30T21:26:41.699Z'),
      ship_time: 'Buổi sáng (07:30 - 11:30)',
      tel: '0343214971',
      name: 'Phan Trường Huy',
      mail: 'phantruonghuy0701@gmail.com',
      id: 'as3EkfdTqQylOv7VQtTh',
    },
    billItems: [
      {
        batch_id: 'ofjquOQ9O34MbDUywuQq',
        created_at: new Date('2023-11-30T21:26:42.152Z'),
        amount: 1,
        bill_id: 'nUjbIFt19T0ODZdk6f3g',
        total_price: 100000,
        total_discount: 10000,
        discount: 10,
        updated_at: new Date('2023-11-30T21:26:42.152Z'),
        price: 100000,
        final_price: 90000,
        id: '9tKsmCvo71tytZMXfylv',
        batch: {
          exp: new Date('2023-12-01T11:15:30.268Z'),
          updated_at: new Date('2023-12-01T02:11:18.225Z'),
          variant_id: 'CUzqRK7dZJ5MPOzUHzwt',
          quantity: 8,
          product_type_id: 'WFiM2yRG3XBeQs2SUMYH',
          discount: {
            start_at: new Date('2023-12-01T08:15:30.268Z'),
            percent: 10,
          },
          product_id: 'V7NgDiUQtiTolm6TwfTU',
          mfg: new Date('2023-11-29T11:15:30.268Z'),
          created_at: new Date('2023-11-29T11:15:30.268Z'),
          branch_id: '1',
          sold: 0,
          id: 'ofjquOQ9O34MbDUywuQq',
        },
        productType: {
          id: 'WFiM2yRG3XBeQs2SUMYH',
          name: 'Bánh ngọt',
          active: true,
          description: 'Bánh ngọt ngon',
          created_at: new Date('2023-10-02T16:31:03.232Z'),
          image: 'typeFeaturedImages/WFiM2yRG3XBeQs2SUMYH',
          updated_at: new Date('2023-10-02T16:31:03.232Z'),
        },
        product: {
          active: true,
          images: [
            'productGalleries/V7NgDiUQtiTolm6TwfTU/wjPT',
            'productGalleries/V7NgDiUQtiTolm6TwfTU/ZSOA',
            'productGalleries/V7NgDiUQtiTolm6TwfTU/Afj0',
          ],
          name: 'Bánh Macaron',
          created_at: new Date('2023-11-28T19:37:57.358Z'),
          updated_at: new Date('2023-11-28T19:37:57.358Z'),
          ingredients: [
            'Lòng trắng trứng gà',
            'Bột hạnh nhân',
            'Đường bột',
            'Màu thực phẩm (dạng gel hoặc bột)',
          ],
          preservation: 'Tránh nhiệt độ cao',
          how_to_use: 'Dùng ngay',
          colors: [
            'WHNUrOsSnyMAwz6eSdwQ',
            'cVwX6VXswB2zAOHKMMuS',
            'CXW6kk6CW7F93YX2SioB',
            '7ch4mCIbNtcIj6GQ94Mx',
            'T9gBY8PundtLEFZgOJuV',
            'b6Hhlb8udXcO8RqdA8QV',
            'q7iByMLukbkCEq14gZxj',
            'yWcELX8xYmktHd10E2rJ',
          ],
          product_type_id: 'WFiM2yRG3XBeQs2SUMYH',
          description:
            'Bánh Macaron là một loại bánh ngọt nổi tiếng của Pháp, được làm từ bột hạnh nhân, đường và trứng. Bánh có hình dạng tròn, mỏng và giòn ở hai bên, bên trong là nhân kem hoặc mứt. Bánh có nhiều màu sắc và hương vị khác nhau, như sô cô la, dâu tây, vani, cà phê...',
          id: 'V7NgDiUQtiTolm6TwfTU',
        },
        variant: {
          material: 'Đủ vị',
          updated_at: new Date('2023-11-28T19:42:40.973Z'),
          batches: ['ofjquOQ9O34MbDUywuQq'],
          active: true,
          price: 100000,
          product_type_id: 'WFiM2yRG3XBeQs2SUMYH',
          size: 'nho',
          product_id: 'V7NgDiUQtiTolm6TwfTU',
          created_at: new Date('2023-11-28T19:42:40.973Z'),
          id: 'CUzqRK7dZJ5MPOzUHzwt',
        },
      },
      {
        updated_at: new Date('2023-11-30T21:26:42.152Z'),
        amount: 1,
        total_price: 1000000,
        discount: 10,
        created_at: new Date('2023-11-30T21:26:42.152Z'),
        bill_id: 'nUjbIFt19T0ODZdk6f3g',
        price: 1000000,
        final_price: 900000,
        batch_id: 'kjofMQ813rQbLSpBQGYv',
        total_discount: 100000,
        id: 'gZiYXNvlbxI0B0UJigxG',
        batch: {
          quantity: 4,
          variant_id: 'QbPWKf5Q0Sl5tQ6a4blG',
          mfg: new Date('2023-11-29T10:53:13.160Z'),
          sold: 1,
          branch_id: '1',
          product_type_id: 'WFiM2yRG3XBeQs2SUMYH',
          updated_at: new Date('2023-12-01T06:22:38.592Z'),
          created_at: new Date('2023-11-29T10:53:13.160Z'),
          discount: {
            percent: 10,
            start_at: new Date('2023-12-01T07:53:13.160Z'),
          },
          exp: new Date('2023-12-01T16:59:13.160Z'),
          product_id: '5bRldtNER33wLtCappIg',
          id: 'kjofMQ813rQbLSpBQGYv',
        },
        productType: {
          id: 'WFiM2yRG3XBeQs2SUMYH',
          active: true,
          name: 'Bánh ngọt',
          created_at: new Date('2023-10-02T16:31:03.232Z'),
          updated_at: new Date('2023-10-02T16:31:03.232Z'),
          description: 'Bánh ngọt ngon',
          image: 'typeFeaturedImages/WFiM2yRG3XBeQs2SUMYH',
        },
        product: {
          ingredients: [
            'Socola đen',
            'Trứng',
            'Đường',
            'Bơ, đã mềm',
            'Bột mì',
            'Mứt mơ',
            'Rượu',
            'Đường',
            'Kem tươi',
          ],
          active: true,
          colors: ['yWcELX8xYmktHd10E2rJ'],
          preservation: 'Giữ mát',
          id: '5bRldtNER33wLtCappIg',
          updated_at: new Date('2023-11-28T19:54:34.690Z'),
          images: [
            'productGalleries/5bRldtNER33wLtCappIg/hlQv',
            'productGalleries/5bRldtNER33wLtCappIg/z_7g',
          ],
          description:
            'Nếu bạn là một người yêu thích bánh ngọt, chắc hẳn bạn sẽ không thể bỏ qua món bánh Sachertorte của nước Áo. Đây là một loại bánh gato sô cô la đặc biệt, được phủ một lớp mứt quả mơ vàng và một lớp sô cô la bóng loáng.',
          name: 'Bánh Sachertorte',
          created_at: new Date('2023-11-28T19:54:34.690Z'),
          product_type_id: 'WFiM2yRG3XBeQs2SUMYH',
          how_to_use: 'Dùng ngay',
        },
        variant: {
          size: 'lon',
          product_type_id: 'WFiM2yRG3XBeQs2SUMYH',
          created_at: new Date('2023-11-28T20:00:47.697Z'),
          product_id: '5bRldtNER33wLtCappIg',
          material: 'Truyền thống',
          active: true,
          price: 1000000,
          updated_at: new Date('2023-11-28T20:00:47.697Z'),
          batches: ['kjofMQ813rQbLSpBQGYv'],
          id: 'QbPWKf5Q0Sl5tQ6a4blG',
        },
      },
    ],
    branch: {
      group_id: 'vn01AtyWFcteKd4OJsCa',
      manager_id: 'Hhs5gXkm5jTPf44itD0y',
      updated_at: new Date('2023-10-16T13:10:42.863Z'),
      id: '1',
      created_at: new Date('2023-10-16T13:10:30.135Z'),
      address: 'Số nhà 42, ngõ 17, đường Trần Duy Hưng, quận Cầu Giấy, Hà Nội.',
      name: 'H&H Hà Nội',
      province_id: '4NLfSB5IRPv6JihoPVty',
      active: true,
    },
  };

  return (
    <>
      <Button
        sx={{ my: 24 }}
        variant="contained"
        onClick={async () => {
          try {
            await sendBillToEmail(bill);
          } catch (error) {
            console.log(error);
          }
        }}
      >
        Gửi
      </Button>

      <Box ref={ref} component={'div'}>
        <Box component={'div'} sx={{ backgroundColor: 'red', p: 3 }}>
          huy
        </Box>
      </Box>
    </>
  );
}

export default email;
